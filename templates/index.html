<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ABC Billing System</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.0.3/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="bg-gray-100">
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold text-center mb-8">Welcome to ABC Billing System</h1>
        <form id="billingForm" method="post" action="{{ url_for('home') }}" class="max-w-sm mx-auto">
            <div class="mb-4">
                <label for="email" class="block text-gray-700">Email Address:</label>
                <input type="email" id="email" name="email" class="form-control border border-gray-300 rounded-md shadow-sm">
                <div id="emailError" class="text-red-500"></div>
            </div>
            <div class="mb-4">
                <label for="phone" class="block text-gray-700">Phone Number:</label>
                <input type="tel" id="phone" name="phone" class="form-control border border-gray-300 rounded-md shadow-sm">
                <div id="phoneError" class="text-red-500"></div>
            </div>
            <button type="button" id="startBillingBtn" class="btn btn-primary w-full">Start Billing</button>
        </form>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="billingModal" tabindex="-1" aria-labelledby="billingModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="billingModalLabel">ABC Billing Systems</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6 class="text-lg font-semibold">Instructions:</h6>
                    <p class="mb-4">Once the Proceed button is clicked, you will be taken to the bill page and the billing will start. Place a few items on the allocated place to bill those items as the conveyor moves. For every item added to the bill, you will see the item details in the billing screen.</p>
                    <p class="mb-4">Reach out to our customer representatives for any help!</p>
                    <p>Please confirm your email <span id="userEmail" class="font-semibold"></span> and phone number <span id="userPhone" class="font-semibold"></span> and proceed.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" id="proceedBtn" class="btn btn-primary">Proceed</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <!-- Your custom JavaScript -->
    <script>
        document.getElementById('startBillingBtn').addEventListener('click', function() {
            document.getElementById('emailError').textContent = "";
            document.getElementById('phoneError').textContent = "";
            var email = document.getElementById('email').value.trim();
            var phone = document.getElementById('phone').value.trim();
            if (!validateEmail(email)) {
                document.getElementById('emailError').textContent = "Please enter a valid email address.";
                return;
            }
            if (!validatePhone(phone)) {
                document.getElementById('phoneError').textContent = "Please enter a valid phone number.";
                return;
            }
            document.getElementById('emailError').textContent = "";
            document.getElementById('phoneError').textContent = "";
            document.getElementById('userEmail').textContent = email;
            document.getElementById('userPhone').textContent = phone;
            $('#billingModal').modal('show');
        });

        function validateEmail(email) {
            // Basic email validation regex
            var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function validatePhone(phone) {
            // Phone number should contain only digits and be of length 10
            var phoneRegex = /^\d{10}$/;
            return phoneRegex.test(phone);
        }

        document.getElementById('proceedBtn').addEventListener('click', function() {
            document.getElementById('billingForm').submit();
        });
    </script>
</body>

</html>
